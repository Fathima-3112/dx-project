<template>
    <lightning-card>
        <lightning-spinner if:true={isLoading} alternative-text="Loading" size="small"></lightning-spinner>
    
        <template if:false={isLoading}>   
<template if:true={showBanner}>
    <h3 class="slds-text-heading_small slds-text-align_center slds-p-around_medium">{subRequestType}</h3>
    <div class="sku-banner slds-box slds-theme_alert-texture slds-m-bottom_medium" 
    style="background-color: #fef7e0; border: 1px solid #f2c200; border-radius: 6px;
    padding: 10px; margin-bottom: 10px; font-weight: 500; color: #5a5a5a; text-align: center;">
    <strong>Note:</strong> File upload will appear only after the case is created. So, Please select the option YES and click the "Create Case" button to proceed.
    </div>
</template>



<template if:true={show215}>
 <div class="slds-grid slds-wrap slds-p-around_medium slds-gutters">
    <div class="slds-col slds-size_1-of-2 slds-p-around_x-small">  <lightning-input    label="Order"    name="orderNumber"  onchange={handleInputChange}    required   class="slds-m-top_x-small"> </lightning-input> </div>        
    <div class="slds-col slds-size_1-of-2 slds-p-around_x-small"> <lightning-input   label="Fulfillment date"  name="fulfillmentDate"  onchange={handleInputChange}  required  class="slds-m-top_x-small"> </lightning-input> </div>
    <div class="slds-col slds-size_1-of-2 slds-p-around_x-small"> <lightning-input  name="sku"  label="SKU"  onchange={handleInputChange} required  class="slds-m-top_x-small"> </lightning-input> </div>
    <div class="slds-col slds-size_1-of-2 slds-p-around_x-small"> <lightning-radio-group   label="Reason for Request"  name="reason215Value"  onchange={handleInputChange} options={reason215}  required  type="radio"  class="slds-m-top_x-small"> </lightning-radio-group> </div>  
    <div class="slds-col slds-size_1-of-1 slds-p-left_small slds-p-top_medium"> <lightning-radio-group type="radio" label="Will you attach files for this request?" name="willAttachFiles" options={fileAttachmentOptions} value={willAttachFiles} onchange={handleFileAttachmentChange}  class="slds-m-bottom_medium" required ></lightning-radio-group>  </div>                                            
</div>
</template>

<!-- Validate Item Shipped-->
<template if:true={showValidateForm}>
    <div class="slds-grid slds-gutters slds-wrap slds-p-around_medium">
    <div class="slds-col slds-size_1-of-3 slds-p-right_small"><lightning-input label="Sales Order Return or Exchange #" name="orderNumber" onchange={handleInputChange} required></lightning-input></div>
    <div class="slds-col slds-size_1-of-3 slds-p-left_small"><lightning-input label="Fulfillment" name="fulfillmentValue" onchange={handleInputChange} required></lightning-input></div>
    <div class="slds-col slds-size_1-of-3 slds-p-left_small"><lightning-input  label="Customer Name"  name="customerName"  onchange={handleInputChange} required> </lightning-input></div>
    <div class="slds-col slds-size_1-of-3 slds-p-right_small"><lightning-radio-group label="Reason" name="reasonValidateValue" onchange={handleInputChange} options={reasonValidate} required type="radio"></lightning-radio-group></div>
    <div class="slds-col slds-size_1-of-3 slds-p-left_small"> <lightning-radio-group type="radio" label="Will you attach files for this request?" name="willAttachFiles" options={fileAttachmentOptions} value={willAttachFiles} onchange={handleFileAttachmentChange} class="slds-m-bottom_medium" required></lightning-radio-group>  </div> 
    </div>
    </template>

<!-- Redirect Request-->
<template if:true={showRedirect}>
    <c-redirect-form></c-redirect-form>
</template>


    <!-- Button to create case -->
<template if:true={showBanner}>
    <div class="slds-col slds-align_absolute-center slds-size_1-of-1 slds-p-top_medium" style="height:5rem">
       <lightning-button label="Create Case"  onclick={handleCreateCase}  variant="brand"  class="slds-m-top_medium"></lightning-button>
    </div>
   </template>
   
   <!-- Modal for File Upload (Auto-opened after case creation if 'Yes') -->
   <template if:true={isModalOpen}>
   <section role="dialog" tabindex="-1" class="slds-modal slds-fade-in-open">
           <div class="slds-modal__container">
               <header class="slds-modal__header">
                   <h2 class="slds-text-heading_medium">Upload Files</h2>
               </header>
   
       <div class="slds-modal__content slds-p-around_medium">
       <template if:true={relatedRecordBool}>
           <lightning-file-upload label="Attach Files" name="UploadFile"  record-id={relatedRecordId}  onuploadfinished={handleUploadFinished} multiple file-field-name="Guest_Record_fileupload__c"  file-field-value={relatedRecordId}> </lightning-file-upload>
       </template>
       </div>
   
       <footer class="slds-modal__footer">
           <lightning-button variant="neutral" label="Close" onclick={closeModal}></lightning-button>
       </footer>
       </div>
   </section>
   <div class="slds-backdrop slds-backdrop_open"></div>
   </template>
    </template>
</lightning-card>
</template>